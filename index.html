<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Premium IMEI Checker App - Fixed API Example</title>
<link
  href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;900&display=swap"
  rel="stylesheet"
/>
<link
  href="https://fonts.googleapis.com/icon?family=Material+Icons"
  rel="stylesheet"
/>
<style>
  /* Base and reset */
  *, *::before, *::after {
    box-sizing: border-box;
  }
  body {
    margin: 0; font-family: 'Inter', sans-serif;
    background: var(--bg); color: var(--text-primary);
    line-height: 1.5; min-height: 100vh;
    display: flex; flex-direction: column;
  }

  :root {
    --color-primary: #6366f1;
    --color-primary-light: #818cf8;
    --color-primary-dark: #4f46e5;
    --color-bg-light: #f9fafb;
    --color-bg-dark: #121212;
    --bg: var(--color-bg-light);
    --surface: rgba(255 255 255 / 0.6);
    --surface-glass: rgba(255 255 255 / 0.15);
    --surface-glass-hover: rgba(255 255 255 / 0.25);
    --text-primary: #111827;
    --text-secondary: #6b7280;
    --text-inverse: #eee;
    --shadow-elevation: 0 8px 24px rgba(0 0 0 / 0.1);
    --focus-color: var(--color-primary);
    --error-color: #ef4444;
  }
  [data-theme="dark"] {
    --bg: var(--color-bg-dark);
    --surface: rgba(30 30 30 / 0.6);
    --surface-glass: rgba(30 30 30 / 0.45);
    --surface-glass-hover: rgba(30 30 30 / 0.65);
    --text-primary: #e0e7ff;
    --text-secondary: #9ca3af;
    --text-inverse: #121212;
    --shadow-elevation: 0 8px 24px rgba(0 0 0 / 0.7);
    --focus-color: var(--color-primary-light);
    --error-color: #f87171;
  }

  /* Container and layout */
  .app {
    max-width: 480px;
    margin: 40px auto;
    background: var(--surface-glass);
    backdrop-filter: saturate(180%) blur(20px);
    border-radius: 24px;
    padding: 32px 32px 48px;
    box-shadow: var(--shadow-elevation);
  }

  h1 {
    font-weight: 900;
    font-size: clamp(1.8rem, 4vw, 2.4rem);
    color: var(--color-primary);
    margin-bottom: 0.25em;
    user-select: none;
  }

  p.description {
    color: var(--text-secondary);
    font-weight: 600;
    margin-bottom: 1.5em;
    user-select: none;
  }

  form {
    display: flex;
    flex-direction: column;
    gap: 18px;
  }
  label {
    font-weight: 600;
    color: var(--text-primary);
  }
  input[type=text] {
    padding: 12px 14px;
    font-size: 1.1rem;
    border-radius: 12px;
    border: 2px solid #cbd5e1;
    background: var(--surface);
    color: var(--text-primary);
    outline-offset: 2px;
    transition: border-color 0.3s ease;
  }
  input[type=text]:focus {
    outline: none;
    border-color: var(--focus-color);
    background: var(--surface-glass-hover);
  }
  input[type=text].invalid {
    border-color: var(--error-color);
    background: rgba(239,68,68,0.1);
  }
  .field-error {
    color: var(--error-color);
    font-size: 0.9rem;
    font-weight: 600;
    margin-top: -12px;
    margin-bottom: 10px;
  }

  button[type=submit] {
    background: var(--color-primary);
    color: white;
    font-weight: 700;
    padding: 14px;
    border: none;
    border-radius: 16px;
    font-size: 1.2rem;
    cursor: pointer;
    transition: background-color 0.3s ease, transform 0.2s ease;
    box-shadow: 0 6px 16px rgba(99,102,241,0.4);
    user-select: none;
  }
  button[type=submit]:hover:not(:disabled) {
    background: var(--color-primary-dark);
    transform: translateY(-2px);
    box-shadow: 0 10px 20px rgba(63,63,255,0.6);
  }
  button[type=submit]:focus-visible {
    outline-offset: 2px;
    outline: 3px solid var(--focus-color);
  }
  button[type=submit]:disabled {
    background: #a5b4fc;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
  }

  /* Result section */
  section#result {
    margin-top: 28px;
    background: var(--surface-glass);
    backdrop-filter: saturate(180%) blur(20px);
    border-radius: 20px;
    padding: 24px 28px;
    box-shadow: var(--shadow-elevation);
    user-select: text;
  }
  section#result h2 {
    font-weight: 700;
    color: var(--color-primary);
    font-size: 1.5rem;
    margin-top: 0;
  }

  dl {
    display: grid;
    grid-template-columns: max-content 1fr;
    gap: 0.5rem 2rem;
    margin-top: 1rem;
  }
  dt {
    font-weight: 700;
    color: var(--text-secondary);
  }
  dd {
    margin: 0;
    color: var(--text-primary);
    word-break: break-word;
  }

  img.device-image {
    margin-top: 18px;
    max-width: 100%;
    border-radius: 16px;
    box-shadow: var(--shadow-elevation);
    user-select:none;
  }

  /* Loading skeleton */
  .loading-skeleton {
    margin-top: 24px;
    border-radius: 20px;
    background: repeating-linear-gradient(
      -45deg,
      var(--surface-glass),
      var(--surface-glass) 10px,
      var(--surface-glass-hover) 10px,
      var(--surface-glass-hover) 20px
    );
    animation: shimmer 1.5s linear infinite;
    height: 140px;
  }

  @keyframes shimmer {
    0% {
      background-position: 100% 0;
    }
    100% {
      background-position: -100% 0;
    }
  }

  /* Toast notification */
  #toast {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: var(--surface-glass);
    backdrop-filter: saturate(180%) blur(20px);
    padding: 14px 20px;
    border-radius: 14px;
    box-shadow: var(--shadow-elevation);
    display: flex;
    align-items: center;
    gap: 12px;
    font-weight: 600;
    color: var(--text-primary);
    user-select: none;
    pointer-events: auto;
    cursor: pointer;
    transition: opacity 0.5s ease;
  }
  #toast.hide {
    opacity: 0;
    pointer-events: none;
  }
  #toast .material-icons {
    font-size: 24px;
  }
  #toast.success {
    border-left: 4px solid #22c55e;
  }
  #toast.error {
    border-left: 4px solid var(--error-color);
    color: var(--error-color);
  }
</style>
</head>
<body data-theme="light">
<div class="app" role="main" aria-label="Premium IMEI Checker Application">
  <h1>Check Your Phone IMEI</h1>
  <p class="description">Enter your 15-digit IMEI number to decode your device information using SamFw API.</p>
  <form id="imeiForm" novalidate aria-describedby="errorMsg" aria-live="assertive">
    <label for="imeiInput">IMEI Number</label>
    <input
      type="text"
      id="imeiInput"
      name="imei"
      inputmode="numeric"
      maxlength="15"
      pattern="\\d{15}"
      autocomplete="off"
      spellcheck="false"
      aria-required="true"
      aria-invalid="false"
      placeholder="e.g. 352099001761481"
      required
    />
    <div id="errorMsg" class="field-error" role="alert" aria-live="assertive"></div>
    <button type="submit" id="submitBtn" disabled>Decode IMEI</button>
  </form>

  <div id="loading" class="loading-skeleton" aria-hidden="true" hidden></div>

  <section id="result" hidden aria-live="polite" aria-atomic="true">
    <h2>Device Information</h2>
    <dl id="deviceDetails"></dl>
    <img 
      id="deviceImage"
      class="device-image" 
      src="" 
      alt="" 
      loading="lazy" 
      onerror="this.style.display='none'" 
    />
  </section>
</div>

<div id="toast" role="alert" aria-live="assertive" aria-atomic="true" hidden>
  <span class="material-icons" id="toastIcon">info</span>
  <div id="toastMessage"></div>
</div>

<script>
  (() => {
    'use strict';

    const imeiForm = document.getElementById('imeiForm');
    const imeiInput = document.getElementById('imeiInput');
    const errorMsg = document.getElementById('errorMsg');
    const submitBtn = document.getElementById('submitBtn');
    const loading = document.getElementById('loading');
    const resultSection = document.getElementById('result');
    const deviceDetails = document.getElementById('deviceDetails');
    const deviceImage = document.getElementById('deviceImage');
    const toast = document.getElementById('toast');
    const toastIcon = document.getElementById('toastIcon');
    const toastMessage = document.getElementById('toastMessage');

    // Enable submit if valid 15-digit number (basic check)
    imeiInput.addEventListener('input', () => {
      const val = imeiInput.value.trim();
      const isValid = /^\d{15}$/.test(val);
      if (isValid) {
        imeiInput.classList.remove('invalid');
        errorMsg.textContent = '';
        imeiInput.setAttribute('aria-invalid', 'false');
        submitBtn.disabled = false;
      } else {
        imeiInput.classList.add('invalid');
        errorMsg.textContent = 'IMEI must be exactly 15 digits';
        imeiInput.setAttribute('aria-invalid', 'true');
        submitBtn.disabled = true;
      }
    });

    // Show toast message
    function showToast(message, type = 'info') {
      toastMessage.textContent = message;
      toastIcon.textContent = type === 'success' ? 'check_circle' : (type === 'error' ? 'error' : 'info');
      toast.className = '';
      toast.classList.add(type);
      toast.hidden = false;
      toast.classList.remove('hide');
      clearTimeout(toast._timeout);
      toast._timeout = setTimeout(() => {
        toast.classList.add('hide');
        toast._timeout2 = setTimeout(() => (toast.hidden = true), 500);
      }, 3500);
    }
    // Dismiss toast on click
    toast.addEventListener('click', () => {
      clearTimeout(toast._timeout);
      clearTimeout(toast._timeout2);
      toast.classList.add('hide');
      setTimeout(() => (toast.hidden = true), 500);
    });

    // Clear previous result
    function clearResult() {
      deviceDetails.innerHTML = '';
      deviceImage.src = '';
      deviceImage.alt = '';
      resultSection.hidden = true;
    }

    // Render device details
    function renderResult(data) {
      // sample keys from typical API response - adjust to real API keys
      const fields = [
        { label: 'Brand', key: 'brand' },
        { label: 'Model', key: 'model' },
        { label: 'Manufacturer', key: 'manufacturer' },
        { label: 'Device Type', key: 'deviceType' },
        { label: 'Release Year', key: 'releaseYear' },
        { label: 'Hardware', key: 'hardware' },
        { label: 'Operating System', key: 'os' },
        { label: 'Country', key: 'country' },
        { label: 'Warranty Status', key: 'warranty' },
        { label: 'Notes', key: 'notes' }
      ];
      deviceDetails.innerHTML = '';
      fields.forEach(f => {
        if (data[f.key]) {
          const dt = document.createElement('dt');
          dt.textContent = f.label;
          const dd = document.createElement('dd');
          dd.textContent = data[f.key];
          deviceDetails.appendChild(dt);
          deviceDetails.appendChild(dd);
        }
      });
      if (data.imageUrl) {
        deviceImage.src = data.imageUrl;
        deviceImage.alt = `${data.brand || ''} ${data.model || ''} image`.trim();
        deviceImage.style.display = 'block';
      } else {
        deviceImage.style.display = 'none';
      }
      resultSection.hidden = false;
    }

    // Simulate fallback dummy data if API is not available
    function getDummyDeviceData(imei) {
      const prefix = imei.slice(0, 8);
      const dummyDB = {
        '35779206': {
          brand: 'Samsung',
          model: 'Galaxy S21 Ultra',
          manufacturer: 'Samsung Electronics',
          deviceType: 'Smartphone',
          releaseYear: '2021',
          hardware: 'Exynos 2100',
          os: 'Android 11',
          country: 'South Korea',
          warranty: 'Valid until 2025-05-10',
          notes: '5G enabled, 12GB RAM, 128GB Storage',
          imageUrl: 'https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/fc639a2c-7c97-4098-bfd4-8ae778cc4fbc.png',
        },
        '35955506': {
          brand: 'Apple',
          model: 'iPhone 13 Pro',
          manufacturer: 'Apple Inc.',
          deviceType: 'Smartphone',
          releaseYear: '2021',
          hardware: 'A15 Bionic',
          os: 'iOS 15',
          country: 'USA',
          warranty: 'Valid until 2024-09-05',
          notes: 'LiDAR scanner, Triple camera, 6GB RAM',
          imageUrl: 'https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/a1bf63b6-38ea-4f3c-8584-88f02f5f72aa.png',
        }
      };
      return dummyDB[prefix] || null;
    }

    // Call the IMEI check API
    async function callImeApi(imei) {
      // Replace with real API endpoint and parameters:
      // Example placeholder URL - this won't work unless you have a real API URL & key
      const API_ENDPOINT = 'https://api.samfw.com/imei/check'; // placeholder
      const API_KEY = '';  // insert your API key if required

      // For this example, we simulate a real fetch with a delay and dummy data
      // Uncomment fetch code and supply your real API URL & key if available

      /* Uncomment if real API available:
      const response = await fetch(\`\${API_ENDPOINT}?imei=\${imei}\`, {
        headers: {
          'Authorization': \`Bearer \${API_KEY}\`,
          'Accept': 'application/json'
        }
      });
      if (!response.ok) {
        throw new Error(\`Failed to fetch IMEI data (Status: \${response.status})\`);
      }
      const data = await response.json();
      return data;
      */

      // Simulated delay and dummy response for demo purposes:
      return new Promise((resolve) => {
        setTimeout(() => {
          const dummyData = getDummyDeviceData(imei);
          if (dummyData) {
            resolve(dummyData);
          } else {
            resolve(null); // no data found
          }
        }, 1500);
      });
    }

    imeiForm.addEventListener('submit', async (event) => {
      event.preventDefault();
      clearResult();
      errorMsg.textContent = '';
      submitBtn.disabled = true;
      imeiInput.disabled = true;
      loading.hidden = false;
      loading.setAttribute('aria-hidden', 'false');

      const imei = imeiInput.value.trim();

      try {
        const data = await callImeApi(imei);
        loading.hidden = true;
        loading.setAttribute('aria-hidden', 'true');
        submitBtn.disabled = false;
        imeiInput.disabled = false;
        if (data) {
          renderResult(data);
          showToast('IMEI decoded successfully!', 'success');
        } else {
          errorMsg.textContent = 'No information found for this IMEI.';
          imeiInput.classList.add('invalid');
          showToast('IMEI not recognized.', 'error');
        }
      } catch (err) {
        loading.hidden = true;
        loading.setAttribute('aria-hidden', 'true');
        submitBtn.disabled = false;
        imeiInput.disabled = false;
        errorMsg.textContent = 'Error fetching IMEI information. Try again later.';
        showToast('Network error or invalid API response.', 'error');
        console.error('IMEI API error:', err);
      }
    });

  })();
</script>
</body>
</html>

